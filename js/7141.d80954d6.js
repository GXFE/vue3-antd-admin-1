"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[7141,9291,3335,5272,9157,4862,1415,6173,9400,6501,4118,4809,1610],{68868:function(e,t,n){n.a(e,(async function(e,r){try{n(85827),n(57658);var a=n(66252),o=n(2262),u=n(34118),l=n(14809),i=n(27623),d=n(31136),c=n(76496),s=n(21502),f=n(46945),p=n(12746),m=e([i,d,c,s,f]);[i,d,c,s,f]=m.then?(await m)():m;const h=(0,a.aZ)({name:"SystemPermissionRole"});t.Z=(0,a.aZ)({...h,setup(e){const[t,n]=(0,s.useTable)(),[r]=(0,f.U)(),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.reduce(((t,r)=>{var a;return null!==(a=r.children)&&void 0!==a&&a.length?m(e,r.children,n):e.includes(r.value)&&t.push(r.value),t}),n)},h=async e=>{const[t]=await r({modalProps:{title:(e.id?"编辑":"新增")+"角色",width:"50%",onFinish:async r=>{e.id&&(r.roleId=e.id);const a=null==t?void 0:t.compRefMap.get("menus"),o=null==t?void 0:t.compRefMap.get("depts"),u={...r,menus:[...a.halfCheckedKeys,...a.checkedKeys],depts:[...o.halfCheckedKeys,...o.checkedKeys]};await(e.id?i.ul:i.fA)(u),null==n||n.reload()}},formProps:{labelWidth:100,schemas:l.roleSchemas}}),[a,o]=await Promise.all([(0,d.U4)(),(0,c.Af)()]),u=(0,p.bl)(o),s=(0,p.fl)(a);if(null==t||t.updateSchema([{field:"menus",componentProps:{treeData:u}},{field:"depts",componentProps:{treeData:s}}]),e.id){const n=await(0,i.Xt)({roleId:e.id}),r=n.menus.map((e=>e.menuId)),a=n.depts.map((e=>e.departmentId));null==t||t.setFieldsValue({...e,name:n.roleInfo.name,label:n.roleInfo.label,remark:n.roleInfo.remark,menus:m(r,u),depts:m(a,s)})}},g=[...u.baseColumns,{title:"操作",width:160,dataIndex:"ACTION",hideInSearch:!0,align:"center",fixed:"right",actions:e=>{let{record:t}=e;return[{label:"编辑",auth:{perm:"sys.role.update",effect:"disable"},onClick:()=>h(t)},{label:"删除",auth:"sys.role.delete",popConfirm:{title:"你确定要删除吗？",onConfirm:()=>(async e=>{await(0,i.Rd)({roleIds:[e.id]}),null==n||n.reload()})(t)}}]}}];return(e,n)=>{const r=(0,a.up)("a-button");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)((0,o.SU)(t),{"row-key":"id","header-title":"角色管理","data-request":(0,o.SU)(i.$s),columns:g,bordered:"",size:"small"},{toolbar:(0,a.w5)((()=>[(0,a.Wm)(r,{type:"primary",disabled:!e.$auth("sys.role.add"),onClick:n[0]||(n[0]=e=>h({}))},{default:(0,a.w5)((()=>[(0,a.Uk)(" 新增 ")])),_:1},8,["disabled"])])),_:1},8,["data-request"])])}}}),r()}catch(e){r(e)}}))},31136:function(e,t,n){n.a(e,(async function(e,r){try{n.d(t,{MB:function(){return d},U4:function(){return l},UJ:function(){return c},aS:function(){return i},m3:function(){return s}});var a=n(4064),o=n(27301),u=e([a]);function l(){return(0,a.W)({url:o.default.list,method:"get"})}function i(e){return(0,a.W)({url:"sys/dept/delete",method:"post",data:e},{successMsg:"删除成功"})}function d(e){return(0,a.W)({url:o.default.update,method:"post",data:e})}function c(e){return(0,a.W)({url:o.default.add,method:"post",data:e})}function s(e){return(0,a.W)({url:o.default.transfer,method:"post",data:e})}a=(u.then?(await u)():u)[0],r()}catch(f){r(f)}}))},76496:function(e,t,n){n.a(e,(async function(e,r){try{n.d(t,{Af:function(){return l},RD:function(){return c},ZT:function(){return i},_8:function(){return d}});var a=n(4064),o=n(57314),u=e([a]);function l(){return(0,a.W)({url:o.default.list,method:"get"})}function i(e){return(0,a.W)({url:o.default.add,method:"post",data:e},{successMsg:"创建成功"})}function d(e){return(0,a.W)({url:o.default.update,method:"post",data:e},{successMsg:"更新成功"})}function c(e){return(0,a.W)({url:o.default.delete,method:"post",data:e},{successMsg:"删除成功"})}a=(u.then?(await u)():u)[0],r()}catch(s){r(s)}}))},27623:function(e,t,n){n.a(e,(async function(e,r){try{n.d(t,{$s:function(){return d},JV:function(){return i},Rd:function(){return f},Xt:function(){return l},fA:function(){return c},ul:function(){return s}});var a=n(4064),o=n(15322),u=e([a]);function l(e){return(0,a.W)({url:o.default.info,method:"get",params:e})}function i(e){return(0,a.W)({url:o.default.list,method:"get",data:e})}function d(e){return(0,a.W)({url:o.default.page,method:"get",params:e})}function c(e){return(0,a.W)({url:o.default.add,method:"post",data:e},{successMsg:"创建角色成功"})}function s(e){return(0,a.W)({url:o.default.update,method:"post",data:e},{successMsg:"更新角色成功"})}function f(e){return(0,a.W)({url:o.default.delete,method:"post",data:e},{successMsg:"删除角色成功"})}a=(u.then?(await u)():u)[0],r()}catch(p){r(p)}}))},85713:function(e,t,n){n.d(t,{G:function(){return s}});var r,a,o=n(66252),u=n(2262);!function(e){e.XS="XS",e.SM="SM",e.MD="MD",e.LG="LG",e.XL="XL",e.XXL="XXL"}(r||(r={})),function(e){e[e.XS=480]="XS",e[e.SM=576]="SM",e[e.MD=768]="MD",e[e.LG=992]="LG",e[e.XL=1200]="XL",e[e.XXL=1600]="XXL"}(a||(a={}));const l=new Map;let i,d,c;function s(){return{screenRef:(0,o.Fl)((()=>(0,u.SU)(i))),widthRef:d,screenEnum:a,realWidthRef:c}}l.set(r.XS,a.XS),l.set(r.SM,a.SM),l.set(r.MD,a.MD),l.set(r.LG,a.LG),l.set(r.XL,a.XL),l.set(r.XXL,a.XXL)},54278:function(e,t,n){n.d(t,{GP:function(){return a}});var r=n(27484);const a=n.n(r)()},98243:function(e,t,n){n.d(t,{GR:function(){return o},IS:function(){return a},RH:function(){return u},nz:function(){return l}});var r=n(71377);function a(e){var t;if(!e)return"file-type-unknown";const n=null===(t=/[.]/.exec(r=e)?null===(a=/[^.]+$/.exec(r))||void 0===a?void 0:a[0]:void 0)||void 0===t?void 0:t.toLowerCase();var r,a;return n?["png","jpg","jpeg","ico","gif","bmp","webp"].includes(n)?"file-type-img":["markdown","md","txt"].includes(n)?"file-type-txt":["docx","doc","docm","dot","dotx"].includes(n)?"file-type-docx":["csv","xls","xlsb","xlsm","xlsx","xltx"].includes(n)?"file-type-excel":"pdf"===n?"file-type-pdf":["pptx","ppt","pptm"].includes(n)?"file-type-ppt":["zip","rar","7z","tar","gz","tgz","tar.gz","tar.xz"].includes(n)?"file-type-zip":["mp4","avi","wmv","rmvb","3gp","mov","m4v","flv","mkv"].includes(n)?"file-type-video":["mp3","wav"].includes(n)?"file-type-music":["vue","js","go","java","ts","css","html","php","c","cpp","swift","kt"].includes(n)?"file-type-code":"file-type-unknown":"file-type-unknown"}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const n=1024,r=t<0?0:t,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,o)).toFixed(r))} ${a[o]}`}function u(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(e in n)t[e]=(0,r.Kn)(t[e])?u(t[e],n[e]):t[e]=n[e];return t}const l=(e,t)=>{const n=e;return n.install=r=>{r.component(n.name||n.displayName,e),t&&(r.config.globalProperties[t]=e)},e}},14809:function(e,t,n){n.r(t),n.d(t,{roleSchemas:function(){return r}});const r=[{field:"name",component:"Input",label:"名称",rules:[{required:!0,type:"string"}],colProps:{span:12}},{field:"label",component:"Input",label:"标识",rules:[{required:!0,type:"string"}],colProps:{span:12}},{field:"remark",component:"InputTextArea",label:"备注"},{field:"menus",component:"Tree",label:"菜单权限",colProps:{span:12},componentProps:{checkable:!0,vModelKey:"checkedKeys",style:{height:"350px",paddingTop:"5px",overflow:"auto",borderRadius:"6px",border:"1px solid #dcdfe6"}}},{field:"depts",component:"Tree",label:"部门权限",colProps:{span:12},componentProps:{checkable:!0,vModelKey:"checkedKeys",style:{height:"350px",paddingTop:"5px",overflow:"auto",borderRadius:"6px",border:"1px solid #dcdfe6"}}}]},93748:function(e,t,n){n.d(t,{z:function(){return a}});n(81299);var r=n(71377);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;if(!e||!Reflect.has(e,t))return null;if(!(0,r.mf)(e[t]))return null;const a=e[t];return a?a(n):null}},34118:function(e,t,n){n.r(t),n.d(t,{baseColumns:function(){return r}});const r=[{title:"#",dataIndex:"id",width:55,align:"center",hideInSearch:!0},{title:"名称",width:200,align:"center",dataIndex:"name"},{title:"标识",width:80,align:"center",dataIndex:"label"},{title:"备注",dataIndex:"remark",align:"center"},{title:"创建时间",dataIndex:"createdAt",align:"center",hideInSearch:!0},{title:"更新时间",align:"center",dataIndex:"updatedAt",hideInSearch:!0}]},39623:function(e,t,n){n.a(e,(async function(e,r){try{n.r(t);var a=n(57627),o=e([a]);const u=(a=(o.then?(await o)():o)[0]).Z;t.default=u,r()}catch(e){r(e)}}))},57627:function(e,t,n){n.a(e,(async function(e,r){try{n.d(t,{Z:function(){return a.Z}});var a=n(68868),o=e([a]);a=(o.then?(await o)():o)[0],r()}catch(e){r(e)}}))}}]);