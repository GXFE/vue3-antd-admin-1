"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[828,6580],{75956:function(e,n,l){l.a(e,(async function(e,t){try{l(85827),l(57658);var a=l(66252),o=l(2262),r=l(49963),u=l(3577),i=l(66309),c=l(60191),d=l(17301),s=l(98704),p=l(62282),v=l(96461),h=l(77630),f=l(46580),m=l(66827),k=e([m]);m=(k.then?(await k)():k)[0];const y={class:"input-box"};n.Z=(0,a.aZ)({__name:"index",props:{value:{type:Array,default:()=>[],isRequired:!0}},emits:["update:value"],setup(e,n){let{emit:l}=n;const t=e,k=(0,i.NCN)(t,"value",l),g=(0,o.iH)(),b=(0,o.iH)((0,m.ik)()),w=d.ZP.useInjectFormItemContext(),C=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(((e,n)=>{var l,t;return null!==(l=n.children)&&void 0!==l&&l.length||!n.checked||!n.value||e.push({label:n.value,value:n.value,node:n}),null!==(t=n.children)&&void 0!==t&&t.length&&C(n.children,e),e}),n)},_=e=>{const n=e=>e.some((e=>{var l;return!!k.value.includes(e.value)||!(null===(l=e.children)||void 0===l||!l.length)&&n(e.children)})),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e||e.forEach((e=>{var a,o;null!==(a=e.children)&&void 0!==a&&a.length&&l(e.children,e),e.parent=t,e.indeterminate=!1,e.checked=k.value.includes(e.value),null!==(o=e.children)&&void 0!==o&&o.length&&(e.indeterminate=n(e.children))}))};l(e)};_(b.value);const S=()=>{k.value=[],setTimeout((()=>{var e;b.value=(0,m.ik)(),_(b.value),null===(e=g.value)||void 0===e||e.clearCheck()}))},P=(0,a.Fl)((()=>C(b.value)));return(0,a.YP)((()=>P.value),(e=>{k.value=e.map((e=>e.value)),w.onFieldChange()})),(e,n)=>((0,a.wg)(),(0,a.j4)((0,o.SU)(s.Z),{placement:"bottomLeft",trigger:"click","overlay-class-name":"__multiple-cascader"},{content:(0,a.w5)((()=>[(0,a.Wm)(h.default,{ref_key:"nodePanelRef",ref:g,options:b.value},null,8,["options"])])),default:(0,a.w5)((()=>[(0,a._)("div",y,[(0,a.Wm)((0,o.SU)(p.ZP),{placeholder:"请选择"},(0,a.Nv)({_:2},[(0,o.SU)(P).length?{name:"prefix",fn:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(P),(e=>((0,a.wg)(),(0,a.j4)((0,o.SU)(v.ZP),{key:e.value,class:"tag-item",closable:"",onClose:(0,r.iM)((n=>(e=>{(0,f.updateNodeCheckStatus)(!1,e.node)})(e)),["prevent"])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.label),1)])),_:2},1032,["onClose"])))),128)),(0,a.Wm)((0,o.SU)(c.Z),{class:"clear-icon",onClick:(0,r.iM)(S,["prevent"])},null,8,["onClick"])])),key:"0"}:void 0]),1024)])])),_:1}))}}),t()}catch(e){t(e)}}))},46580:function(e,n,l){l.r(n),l.d(n,{setChildrenChecked:function(){return a},setParentChecked:function(){return t},updateNodeCheckStatus:function(){return o}});const t=e=>{const n=null==e?void 0:e.children,l=null==n?void 0:n.length,a=!!l&&!n.some((e=>!e.checked)),o=!!l&&n.some((e=>e.checked||e.indeterminate));e.checked=a,e.indeterminate=!a&&o,e.parent&&t(e.parent)},a=(e,n)=>{null==e||e.forEach((e=>{var l;e.checked=n,e.indeterminate=!1,null!==(l=e.children)&&void 0!==l&&l.length&&a(e.children,n)}))},o=(e,n)=>{var l;n.checked=e,n.indeterminate=!1,Array.isArray(n.children)&&null!==(l=n.children)&&void 0!==l&&l.length&&a(n.children,e),n.parent&&t(n.parent)}},90828:function(e,n,l){l.a(e,(async function(e,t){try{l.r(n),l.d(n,{menuSchemas:function(){return d}});var a=l(30923),o=l(71144),r=l(5143),u=e([a]);a=(u.then?(await u)():u)[0];const i=e=>1===e,c=e=>2===e,d=[{field:"type",component:"RadioGroup",label:"菜单类型",defaultValue:0,rules:[{required:!0,type:"number"}],componentProps:{options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}]}},{field:"name",component:"Input",label:"节点名称",rules:[{required:!0,type:"string"}]},{field:"parentId",component:"TreeSelect",label:"上级节点",componentProps:{fieldNames:{label:"name",value:"id"},getPopupContainer:()=>document.body},rules:[{required:!0,type:"number"}]},{field:"router",component:"Input",label:"节点路由",vIf:e=>{let{formModel:n}=e;return!c(n.type)},rules:[{required:!0,type:"string"}]},{field:"perms",component:()=>a.default,label:"权限",vIf:e=>{let{formModel:n}=e;return c(n.type)},rules:[{required:!0,type:"array",message:"请选择权限"}]},{field:"viewPath",component:"Select",label:"文件路径",vIf:e=>{let{formModel:n}=e;return i(n.type)&&!n.isExt},componentProps:{options:Object.keys(r.constantRouterComponents).map((e=>({label:e,value:e})))},rules:[{required:!0,type:"string"}]},{field:"icon",component:()=>o.default,label:"节点图标",vIf:e=>{let{formModel:n}=e;return!c(n.type)}},{field:"keepalive",component:"Switch",label:"是否缓存",defaultValue:!0,vIf:e=>{let{formModel:n}=e;return i(n.type)}},{field:"isExt",component:"Switch",label:"是否外链",defaultValue:!1,colProps:{span:12},vIf:e=>{let{formModel:n}=e;return i(n.type)}},{field:"openMode",component:"RadioGroup",label:"打开方式",defaultValue:1,vIf:e=>{let{formModel:n}=e;return i(n.type)&&n.isExt},colProps:{span:12},componentProps:{optionType:"button",buttonStyle:"solid",options:[{label:"新窗口打开",value:1},{label:"内嵌页打开",value:2}]}},{field:"isShow",component:"Switch",label:"是否显示",defaultValue:!0,vIf:e=>{let{formModel:n}=e;return!c(n.type)}},{field:"orderNum",component:"InputNumber",label:"排序号",defaultValue:255,componentProps:{style:{width:"100%"}}}];t()}catch(e){t(e)}}))},30923:function(e,n,l){l.a(e,(async function(e,t){try{l.r(n);var a=l(46439),o=(l(219),l(57415),l(83744)),r=e([a]);a=(r.then?(await r)():r)[0];const u=(0,o.Z)(a.Z,[["__scopeId","data-v-a03d269e"]]);n.default=u,t()}catch(e){t(e)}}))},77630:function(e,n,l){l.r(n),l.d(n,{default:function(){return f}});var t=l(66252),a=l(2262),o=l(3577),r=l(67944),u=l(36993),i=l(46580);const c={class:"flex"},d={class:"ant-cascader-menu min-w-150px"},s=["onClick"],p={class:"label"},v=(0,t.aZ)({name:"NodePanel"});var h=(0,t.aZ)({...v,props:{options:{type:Array,default:()=>[]}},setup(e,n){let{expose:l}=n;const v=e,h=(0,a.iH)(),f=(0,a.iH)([]),m=(0,a.iH)(),k=()=>{var e,n;return null===(e=v.options)||void 0===e||null===(n=e.find((e=>e.value===m.value)))||void 0===n?void 0:n.children},y=(0,t.Fl)(k);(0,t.YP)(y,(e=>{e||(f.value=[])}));return l({clearCheck:()=>{var e;f.value.forEach((e=>{e.checked=!1,e.indeterminate=!1})),f.value.length&&setTimeout((()=>{f.value=k()||[]})),null===(e=h.value)||void 0===e||e.clearCheck()}}),(n,l)=>{var v;const k=(0,t.up)("node-panel",!0);return(0,t.wg)(),(0,t.iD)("div",c,[(0,t._)("div",d,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>{var n;return(0,t.wg)(),(0,t.iD)("div",{key:e.value,class:"check-row ant-cascader-menu-item ant-cascader-menu-item-expand",onClick:n=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;f.value=e,m.value=n}(e.children,e.value)},[(0,t._)("div",null,[(0,t.Wm)((0,a.SU)(u.ZP),{checked:e.checked,"onUpdate:checked":n=>e.checked=n,indeterminate:e.indeterminate,onChange:n=>((e,n)=>{const l=e.target.checked;(0,i.updateNodeCheckStatus)(l,n)})(n,e)},null,8,["checked","onUpdate:checked","indeterminate","onChange"]),(0,t._)("span",p,(0,o.zw)(e.label),1)]),null!==(n=e.children)&&void 0!==n&&n.length?((0,t.wg)(),(0,t.j4)((0,a.SU)(r.Z),{key:0,class:"arrow"})):(0,t.kq)("",!0)],8,s)})),128))]),null!==(v=f.value)&&void 0!==v&&v.length&&(0,a.SU)(y)?((0,t.wg)(),(0,t.j4)(k,{key:0,ref_key:"nodePanelRef",ref:h,options:f.value},null,8,["options"])):(0,t.kq)("",!0)])}}});var f=(0,l(83744).Z)(h,[["__scopeId","data-v-15a34f47"]])},46439:function(e,n,l){l.a(e,(async function(e,t){try{l.d(n,{Z:function(){return a.Z}});var a=l(75956),o=e([a]);a=(o.then?(await o)():o)[0],t()}catch(e){t(e)}}))},219:function(){},57415:function(){}}]);